\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{tufte-css-latex-look}[2023-06-21 package tufte-css-latex-look]

% page setup 
\RequirePackage[letterpaper,left=1in,top=1in,headsep=2\baselineskip,textwidth=26pc,marginparsep=2pc,marginparwidth=12pc,textheight=44\baselineskip,headheight=\baselineskip]{geometry}
\RequirePackage{ragged2e}
\RaggedRight

% Set some margin lengths, from tufte-common.def
\setlength\leftmargini   {1pc}
\setlength\leftmarginii  {1pc}
\setlength\leftmarginiii {1pc}
\setlength\leftmarginiv  {1pc}
\setlength\leftmarginv   {1pc}
\setlength\leftmarginvi  {1pc}
\setlength\labelsep      {.5pc}
\setlength\labelwidth    {\leftmargini}
\addtolength\labelwidth{-\labelsep}

% \RaggedRight allows hyphenation, from tufte-common.def
\setlength{\parindent}{1.0pc}%
\setlength{\parskip}{0pt}%
\setlength{\RaggedRightRightskip}{\z@ plus 0.08\hsize}

% adapted from tufte-common.def
\NewDocumentCommand{\@tuftex@ResetPar}{}{%
  \setlength{\RaggedRightParindent}{1.0pc}%
  \setlength{\JustifyingParindent}{1.0pc}%
  \setlength{\parindent}{1pc}%
  \setlength{\parskip}{0pt}%
} %\@tuftex@ResetPar
\@tuftex@ResetPar


% fonts
\RenewDocumentCommand{\normalsize}{}{%
   \@setfontsize\normalsize\@xpt{14}%
   \abovedisplayskip 10\p@ \@plus2\p@ \@minus5\p@
   \abovedisplayshortskip \z@ \@plus3\p@
   \belowdisplayshortskip 6\p@ \@plus3\p@ \@minus3\p@
   \belowdisplayskip \abovedisplayskip
   \let\@listi\@listI}
\setlength{\normalbaselineskip}{14pt}
\normalsize
\RenewDocumentCommand{\small}{}{%
   \@setfontsize\small\@ixpt{12}%
   \abovedisplayskip 8.5\p@ \@plus3\p@ \@minus4\p@
   \abovedisplayshortskip \z@ \@plus2\p@
   \belowdisplayshortskip 4\p@ \@plus2\p@ \@minus2\p@
   \def\@listi{\leftmargin\leftmargini
               \topsep 4\p@ \@plus2\p@ \@minus2\p@
               \parsep 2\p@ \@plus\p@ \@minus\p@
               \itemsep \parsep}%
   \belowdisplayskip \abovedisplayskip
}
\RenewDocumentCommand{\footnotesize}{}{%
   \@setfontsize\footnotesize\@viiipt{10}%
   \abovedisplayskip 6\p@ \@plus2\p@ \@minus4\p@
   \abovedisplayshortskip \z@ \@plus\p@
   \belowdisplayshortskip 3\p@ \@plus\p@ \@minus2\p@
   \def\@listi{\leftmargin\leftmargini
               \topsep 3\p@ \@plus\p@ \@minus\p@
               \parsep 2\p@ \@plus\p@ \@minus\p@
               \itemsep \parsep}%
   \belowdisplayskip \abovedisplayskip
}
\RenewDocumentCommand{\scriptsize}{}{\@setfontsize\scriptsize\@viipt\@viiipt}
\RenewDocumentCommand{\tiny}{}{\@setfontsize\tiny\@vpt\@vipt}
\RenewDocumentCommand{\large}{}{\@setfontsize\large\@xipt{15}}
\RenewDocumentCommand{\Large}{}{\@setfontsize\Large\@xiipt{16}}
\RenewDocumentCommand{\LARGE}{}{\@setfontsize\LARGE\@xivpt{18}}
\RenewDocumentCommand{\huge}{}{\@setfontsize\huge\@xxpt{30}}
\RenewDocumentCommand{\Huge}{}{\@setfontsize\Huge{24}{36}}

\IfFileExists{mathpazo.sty}
{\RequirePackage[osf,sc]{mathpazo}}
{\PackageError{tuftex-fonts}{Requires mathpazo}{Requires mathpazo}}

\IfFileExists{helvet.sty}
{\RequirePackage[scaled=0.90]{helvet}}
{\PackageError{tuftex-fonts}{Requires helvet}{Requires helvet}}

\IfFileExists{beramono.sty}
{\RequirePackage[scaled=0.85]{beramono}}
{\PackageError{tuftex-fonts}{Requires beramo}{Requires beramono}}

\RequirePackage[T1]{fontenc}
\RequirePackage{textcomp}

% sectioning
\RequirePackage{titlesec,titletoc}

\titleformat{\section}%
  [hang]% shape
  {\normalfont\Large\itshape}% format applied to label+text
  {\thesection}% label
  {1em}% horizontal separation between label and title body
  {}% before the title body
  []% after the title body

\titleformat{\subsection}%
  [hang]% shape
  {\normalfont\large\itshape}% format applied to label+text
  {\thesubsection}% label
  {1em}% horizontal separation between label and title body
  {}% before the title body
  []% after the title body

\titleformat{\paragraph}%
  [runin]% shape
  {\normalfont\itshape}% format applied to label+text
  {\theparagraph}% label
  {1em}% horizontal separation between label and title body
  {}% before the title body
  []% after the title body

\titlespacing*{\section}{0pt}{3.5ex plus 1ex minus .2ex}{2.3ex plus .2ex}
\titlespacing*{\subsection}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus.2ex}

% Subsubsection and following section headings shouldn't be used.
% See Bringhurst's _The Elements of Typography_, section 4.2.2.
\RenewDocumentCommand{\subsubsection}{}{%
\PackageError{tuftex-sectioning}{\string\subsubsection is undefined by this class.
    See Robert Bringhurst's _The Elements of 
    Typographic Style_, section 4.2.2.
    \string\subsubsection was used}
    {From Bringhurst's _The Elements of Typographic Style_, section 4.2.2: Use as 
    many levels of headings as you need, no more and no fewer.  Also see the many 
    related threads on Ask E.T. at http://www.edwardtufte.com/.}
}

\RenewDocumentCommand{\subparagraph}{}{%
\PackageError{tuftex-sectioning}{\string\subparagraph is undefined by this class.%
    See Robert Bringhurst's _The Elements of 
    Typographic Style_, section 4.2.2.
    \string\subparagraph was used}
    {From Bringhurst's _The Elements of Typographic Style_, section 4.2.2: Use as 
    many levels of headings as you need, no more and no fewer.  Also see the many 
    related threads on Ask E.T. at http://www.edwardtufte.com/.}
}
